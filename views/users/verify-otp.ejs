<%- layout('layouts/boilerplate.ejs') %>

<main class="auth-page">
  <div class="auth-container">
    <div class="auth-card">
      <div class="auth-logo">
        <img
          src="/images/Pixelary-logo.png"
          alt="Pixelary"
          class="logo-image"
        />
      </div>

      <div class="auth-header">
        <h1 class="auth-title">Verify OTP</h1>
        <p class="auth-description">
          Enter the 6-digit code we sent to your email address.
        </p>
      </div>

      <form
        class="auth-form needs-validation"
        action="/user/verify-otp"
        method="POST"
        novalidate
      >
        <div class="form-group">
          <input
            type="email"
            placeholder="Enter your email address"
            class="form-input form-control"
            value="<%= email || '' %>"
            required
            disabled
          />
          <input type="hidden" name="email" value="<%= email || '' %>" />
        </div>

        <div class="form-group">
          <input
            type="number"
            name="otp"
            placeholder="Enter 6-digit OTP"
            class="form-input form-control"
            maxlength="6"
            pattern="[0-9]{6}"
            required
          />
          <div class="invalid-feedback">Please enter a valid 6-digit OTP.</div>
        </div>

        <button type="submit" class="btn btn-primary btn-full">
          <svg
            class="btn-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M9 12l2 2 4-4" />
            <circle cx="12" cy="12" r="10" />
          </svg>
          Verify OTP
        </button>
      </form>

      <div class="auth-footer">
        <p class="auth-terms">
          Didn't receive the code?
          <a
            href="/user/resend-otp"
            class="auth-link auth-link-primary"
            id="resendLink"
            onclick="handleResendClick(event)"
            >Resend code</a
          >
        </p>
        <p class="auth-signin">
          Remember your password?
          <a href="/user/login" class="auth-link auth-link-primary"
            >Back to Login</a
          >
        </p>
      </div>
    </div>
  </div>
</main>

<script>
  function handleResendClick(event) {
    const link = event.target;
    link.style.color = "#999";
    link.style.pointerEvents = "none";
    link.textContent = "Sending...";
  }
</script>
